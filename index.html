<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/reset.css"rel="stylesheet" type="text/css" >
    <link href="https://fonts.googleapis.com/earlyaccess/notosansjp.css">
    <link rel="stylesheet" href="style.css">
    <script src="words/pre_first.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <title>英打</title>
</head>
<body>
    <div class="main">
        <div>
            <audio id="audio"></audio>
            <p id="ja">何かキーを押してスタート！</p>
            <p><span id="en"></span></p>
            <p><span id="ty"></span></p>
            <input type="checkbox" class="pop-up" id="pop1">
            <label id="popupi" for="pop1" class="overlay">
              <label class="popWindow" for="pop1">
                <div class="pbox">
                <label id="width_100">
                  <label class="close clickable" for="pop1">×</label>
                  <div class="ptitle"><div class="box-018">
                    <table id="list">
                        <tr>
                          <th>間違った英単語</th>
                          <td>意味</td>
                        </tr>
                      </table>
                </div></div>
                </label>
                </div>
              </label>
            </label>
            <div class="c">
              <label for="pop1" class="clickable">
                <img style="text-align: center;" itemprop="image" loading="lazy" src="" alt="結果を見る" width="300" height="200" />
              </label>
            </div>
        </div>
    </div>
    <div class="result">
        
    </div>
    <footer class="footer-001">
        <a href="#">
                <svg class="footer-001__logo" width="571.7" height="105.1" viewBox="0 0 571.7 105.1" xmlns="http://www.w3.org/2000/svg"><g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#ffffff" stroke-width="0.25mm" fill="#ffffff" style="stroke:#ffffff;stroke-width:0.25mm;fill:#ffffff"><path d="M 122.4 79.4 L 118.8 79.4 L 118.8 26.7 L 121.8 26.7 L 122.4 35.1 L 122.6 35.1 Q 126.2 31 130.6 28.2 A 19.638 19.638 0 0 1 134.295 26.336 A 14.297 14.297 0 0 1 139.3 25.4 A 22.483 22.483 0 0 1 143.033 25.689 Q 144.996 26.021 146.561 26.731 A 10.116 10.116 0 0 1 149.15 28.4 Q 152.5 31.4 153.8 36.4 A 63.876 63.876 0 0 1 157.865 32.349 Q 159.963 30.448 162.009 28.996 A 35.931 35.931 0 0 1 162.95 28.35 A 19.12 19.12 0 0 1 166.853 26.333 A 14.416 14.416 0 0 1 171.9 25.4 A 19.076 19.076 0 0 1 176.549 25.933 A 12.613 12.613 0 0 1 183.55 30.35 A 15.479 15.479 0 0 1 186.033 35.018 Q 187.5 39.284 187.5 45.5 L 187.5 79.4 L 184 79.4 L 184 46 Q 184 37.3 180.95 33 A 9.844 9.844 0 0 0 174.664 29.003 A 15.584 15.584 0 0 0 171.5 28.7 A 12.811 12.811 0 0 0 166.741 29.653 A 17.934 17.934 0 0 0 163.6 31.3 A 31.961 31.961 0 0 0 160.502 33.616 Q 157.838 35.85 154.9 39.1 L 154.9 79.4 L 151.4 79.4 L 151.4 46 A 40.584 40.584 0 0 0 151.163 41.454 Q 150.602 36.497 148.718 33.481 A 11.386 11.386 0 0 0 148.4 33 A 9.688 9.688 0 0 0 142.203 29.012 A 15.488 15.488 0 0 0 139 28.7 A 12.591 12.591 0 0 0 134.864 29.434 Q 133.287 29.98 131.656 30.933 A 22.899 22.899 0 0 0 131.05 31.3 A 29.359 29.359 0 0 0 127.62 33.842 Q 125.072 36.013 122.4 39.1 L 122.4 79.4 Z M 3.7 79.4 L 0 79.4 L 0 6.8 L 3.7 6.8 L 3.7 48.4 L 3.9 48.4 L 40.6 6.8 L 45.3 6.8 L 22 33.4 L 48.4 79.4 L 44 79.4 L 19.2 36.3 L 3.7 53.8 L 3.7 79.4 Z M 346.5 79.4 L 342.9 79.4 L 342.9 0 L 346.5 0 L 346.5 60 L 346.7 60 L 373.8 26.7 L 378 26.7 L 361 47.5 L 381 79.4 L 377.1 79.4 L 358.9 50.2 L 346.5 64.9 L 346.5 79.4 Z M 268.8 77.4 L 268.8 77 Q 266.8 75.8 265.45 73.7 Q 264.1 71.6 264.1 68.6 A 10.449 10.449 0 0 1 264.514 65.598 A 8.481 8.481 0 0 1 266.15 62.55 A 31.41 31.41 0 0 1 267.518 61.013 Q 268.191 60.309 268.821 59.757 A 13.163 13.163 0 0 1 269.9 58.9 L 269.9 58.5 Q 267.649 56.519 265.722 53.282 A 32.077 32.077 0 0 1 265.3 52.55 A 16.532 16.532 0 0 1 263.3 46.05 A 20.489 20.489 0 0 1 263.2 44 A 20.725 20.725 0 0 1 263.918 38.453 A 17.585 17.585 0 0 1 265.6 34.4 Q 268 30.2 272.15 27.8 Q 276.3 25.4 281.3 25.4 A 22.561 22.561 0 0 1 283.207 25.477 Q 284.148 25.557 284.975 25.72 A 13.082 13.082 0 0 1 285.35 25.8 A 22.01 22.01 0 0 1 286.524 26.1 Q 287.07 26.258 287.532 26.428 A 9.782 9.782 0 0 1 288.2 26.7 L 305.8 26.7 L 305.8 30 L 293.2 30 A 16.276 16.276 0 0 1 297.024 34.596 A 19.497 19.497 0 0 1 297.7 35.9 A 17.765 17.765 0 0 1 299.266 41.54 A 21.981 21.981 0 0 1 299.4 44 Q 299.4 49.2 297 53.45 Q 294.6 57.7 290.5 60.2 A 17.218 17.218 0 0 1 281.776 62.695 A 20.527 20.527 0 0 1 281.3 62.7 Q 279.1 62.7 276.65 62.05 Q 274.2 61.4 272.4 60.3 Q 270.6 61.7 269.2 63.65 A 7.445 7.445 0 0 0 267.86 67.214 A 9.591 9.591 0 0 0 267.8 68.3 A 7.11 7.11 0 0 0 269.898 73.448 A 7.613 7.613 0 0 0 269.9 73.45 A 5.46 5.46 0 0 0 271.695 74.624 Q 273.99 75.6 278.1 75.6 L 289.8 75.6 A 42.25 42.25 0 0 1 294.33 75.825 Q 298.949 76.325 301.779 77.934 A 10.709 10.709 0 0 1 302.6 78.45 A 9.206 9.206 0 0 1 306.402 84.348 A 14.747 14.747 0 0 1 306.7 87.4 Q 306.7 91.8 303.7 95.9 A 19.559 19.559 0 0 1 298.851 100.517 A 25.945 25.945 0 0 1 295.25 102.55 Q 289.8 105.1 282.4 105.1 Q 276.426 105.1 271.923 103.629 A 23.357 23.357 0 0 1 270.85 103.25 Q 266.135 101.451 263.546 98.283 A 13.283 13.283 0 0 1 263.4 98.1 Q 260.8 94.8 260.8 90.4 A 12.116 12.116 0 0 1 261.816 85.611 A 15.842 15.842 0 0 1 262.95 83.45 A 20.159 20.159 0 0 1 267.151 78.665 A 24.32 24.32 0 0 1 268.8 77.4 Z M 206.8 60.6 L 206.8 26.7 L 210.4 26.7 L 210.4 60.2 A 41.156 41.156 0 0 0 210.633 64.742 Q 211.173 69.588 212.961 72.55 A 11.237 11.237 0 0 0 213.35 73.15 A 9.401 9.401 0 0 0 218.795 76.886 Q 220.671 77.4 223 77.4 Q 227.9 77.4 231.95 74.65 Q 234.703 72.781 237.848 69.503 A 72.479 72.479 0 0 0 240.9 66.1 L 240.9 26.7 L 244.5 26.7 L 244.5 79.4 L 241.4 79.4 L 241 70.4 L 240.8 70.4 A 46.806 46.806 0 0 1 236.465 74.794 A 36.379 36.379 0 0 1 232.5 77.85 A 17.205 17.205 0 0 1 223.298 80.691 A 20.858 20.858 0 0 1 222.7 80.7 Q 214.6 80.7 210.7 75.8 A 15.11 15.11 0 0 1 208.323 71.366 Q 206.8 67.038 206.8 60.6 Z M 537.4 79.4 L 533.8 79.4 L 533.8 26.7 L 536.8 26.7 L 537.4 35.1 L 537.6 35.1 A 56.081 56.081 0 0 1 542.803 30.483 A 46.743 46.743 0 0 1 546 28.2 Q 550.3 25.4 555.8 25.4 Q 563.9 25.4 567.8 30.35 A 15.506 15.506 0 0 1 570.233 34.964 Q 571.654 39.111 571.699 45.111 A 52.572 52.572 0 0 1 571.7 45.5 L 571.7 79.4 L 568.1 79.4 L 568.1 46 Q 568.1 37.3 565.15 33 A 9.379 9.379 0 0 0 559.79 29.255 Q 558.148 28.787 556.152 28.714 A 20.508 20.508 0 0 0 555.4 28.7 Q 550.5 28.7 546.45 31.3 Q 543.514 33.185 540.08 36.435 A 80.319 80.319 0 0 0 537.4 39.1 L 537.4 79.4 Z M 480.7 35.1 L 478.9 32.2 A 33.923 33.923 0 0 1 480.205 31.328 Q 481.58 30.45 483.45 29.4 A 31.461 31.461 0 0 1 486.836 27.77 A 41.657 41.657 0 0 1 490.05 26.6 A 25.596 25.596 0 0 1 496.507 25.442 A 29.757 29.757 0 0 1 498.1 25.4 A 22.587 22.587 0 0 1 501.967 25.71 Q 504.06 26.075 505.742 26.866 A 11.263 11.263 0 0 1 507.85 28.15 Q 511.4 30.9 512.85 35.4 A 30.002 30.002 0 0 1 514.129 41.694 A 37.002 37.002 0 0 1 514.3 45.3 L 514.3 79.4 L 511.3 79.4 L 510.8 72.4 L 510.5 72.4 Q 506.5 75.7 501.65 78.2 Q 496.8 80.7 491.5 80.7 Q 487.4 80.7 483.95 79.2 Q 480.5 77.7 478.4 74.55 Q 476.524 71.736 476.324 67.447 A 22.444 22.444 0 0 1 476.3 66.4 A 14.597 14.597 0 0 1 477.939 59.419 Q 479.988 55.578 484.6 53.05 A 36.934 36.934 0 0 1 490.54 50.514 Q 498.323 47.891 510.7 46.5 Q 510.9 42.2 509.95 38.15 A 13.99 13.99 0 0 0 508.007 33.565 A 12.941 12.941 0 0 0 506.2 31.4 A 8.856 8.856 0 0 0 502.757 29.386 Q 501.389 28.936 499.724 28.781 A 19.729 19.729 0 0 0 497.9 28.7 A 24.53 24.53 0 0 0 491.793 29.435 A 20.842 20.842 0 0 0 487.8 30.9 A 63.325 63.325 0 0 0 484.931 32.389 Q 482.406 33.788 480.7 35.1 Z M 450.4 65.4 L 450.4 30 L 442 30 L 442 27.2 L 450.4 26.7 L 450.8 11.3 L 453.9 11.3 L 453.9 26.7 L 469.5 26.7 L 469.5 30 L 453.9 30 L 453.9 65.9 A 25.232 25.232 0 0 0 454.101 69.182 Q 454.484 72.1 455.6 74.2 A 5.294 5.294 0 0 0 458.267 76.575 Q 460.155 77.4 463.1 77.4 Q 464.389 77.4 465.974 77.031 A 19.133 19.133 0 0 0 466.5 76.9 A 20.582 20.582 0 0 0 468.171 76.387 Q 469.056 76.072 469.8 75.7 L 471 78.7 Q 468.7 79.5 466.45 80.1 Q 464.277 80.679 462.897 80.699 A 6.738 6.738 0 0 1 462.8 80.7 A 20.448 20.448 0 0 1 459.952 80.514 Q 458.459 80.304 457.242 79.855 A 8.861 8.861 0 0 1 455.2 78.8 A 9.589 9.589 0 0 1 451.738 74.288 A 12.184 12.184 0 0 1 451.45 73.45 Q 450.47 70.229 450.405 66.006 A 39.312 39.312 0 0 1 450.4 65.4 Z M 79 80.7 Q 72.7 80.7 67.35 77.45 A 22.478 22.478 0 0 1 60.076 70.254 A 27.852 27.852 0 0 1 58.8 68.05 Q 55.741 62.17 55.606 53.96 A 46.405 46.405 0 0 1 55.6 53.2 Q 55.6 45.208 58.18 39.394 A 24.379 24.379 0 0 1 58.8 38.1 A 25.358 25.358 0 0 1 62.807 32.345 A 21.508 21.508 0 0 1 67.35 28.65 Q 72.7 25.4 79 25.4 Q 83.7 25.4 87.95 27.25 Q 92.2 29.1 95.45 32.65 A 23.72 23.72 0 0 1 99.221 38.238 A 29.723 29.723 0 0 1 100.55 41.4 A 31.324 31.324 0 0 1 102.071 47.88 A 41.309 41.309 0 0 1 102.4 53.2 Q 102.4 61.507 99.437 67.489 A 23.985 23.985 0 0 1 99.15 68.05 A 26.003 26.003 0 0 1 95.118 73.766 A 21.926 21.926 0 0 1 90.6 77.45 Q 85.3 80.7 79 80.7 Z M 410.5 80.7 Q 404.2 80.7 398.85 77.45 A 22.478 22.478 0 0 1 391.576 70.254 A 27.852 27.852 0 0 1 390.3 68.05 Q 387.241 62.17 387.106 53.96 A 46.405 46.405 0 0 1 387.1 53.2 Q 387.1 45.208 389.68 39.394 A 24.379 24.379 0 0 1 390.3 38.1 A 25.358 25.358 0 0 1 394.307 32.345 A 21.508 21.508 0 0 1 398.85 28.65 Q 404.2 25.4 410.5 25.4 Q 415.2 25.4 419.45 27.25 Q 423.7 29.1 426.95 32.65 A 23.72 23.72 0 0 1 430.721 38.238 A 29.723 29.723 0 0 1 432.05 41.4 A 31.324 31.324 0 0 1 433.571 47.88 A 41.309 41.309 0 0 1 433.9 53.2 Q 433.9 61.507 430.937 67.489 A 23.985 23.985 0 0 1 430.65 68.05 A 26.003 26.003 0 0 1 426.618 73.766 A 21.926 21.926 0 0 1 422.1 77.45 Q 416.8 80.7 410.5 80.7 Z M 79 77.4 Q 84.6 77.4 89.05 74.35 A 20.145 20.145 0 0 0 94.868 68.129 A 25.12 25.12 0 0 0 96.1 65.85 A 26.214 26.214 0 0 0 98.303 58.558 A 34.782 34.782 0 0 0 98.7 53.2 A 34.744 34.744 0 0 0 98.129 46.752 A 26.141 26.141 0 0 0 96.1 40.4 A 23.396 23.396 0 0 0 92.815 35.234 A 19.649 19.649 0 0 0 89.05 31.8 Q 84.6 28.7 79 28.7 Q 73.4 28.7 68.95 31.8 A 20.107 20.107 0 0 0 63.157 38.109 A 25.046 25.046 0 0 0 61.95 40.4 A 26.905 26.905 0 0 0 59.825 47.54 A 36.137 36.137 0 0 0 59.4 53.2 A 34.546 34.546 0 0 0 59.96 59.565 A 26.109 26.109 0 0 0 61.95 65.85 A 22.573 22.573 0 0 0 65.196 70.963 A 19.128 19.128 0 0 0 68.95 74.35 Q 73.4 77.4 79 77.4 Z M 410.5 77.4 Q 416.1 77.4 420.55 74.35 A 20.145 20.145 0 0 0 426.368 68.129 A 25.12 25.12 0 0 0 427.6 65.85 A 26.214 26.214 0 0 0 429.803 58.558 A 34.782 34.782 0 0 0 430.2 53.2 A 34.744 34.744 0 0 0 429.629 46.752 A 26.141 26.141 0 0 0 427.6 40.4 A 23.396 23.396 0 0 0 424.315 35.234 A 19.649 19.649 0 0 0 420.55 31.8 Q 416.1 28.7 410.5 28.7 Q 404.9 28.7 400.45 31.8 A 20.107 20.107 0 0 0 394.657 38.109 A 25.046 25.046 0 0 0 393.45 40.4 A 26.905 26.905 0 0 0 391.325 47.54 A 36.137 36.137 0 0 0 390.9 53.2 A 34.546 34.546 0 0 0 391.46 59.565 A 26.109 26.109 0 0 0 393.45 65.85 A 22.573 22.573 0 0 0 396.696 70.963 A 19.128 19.128 0 0 0 400.45 74.35 Q 404.9 77.4 410.5 77.4 Z M 322 79.4 L 318.4 79.4 L 318.4 26.7 L 322 26.7 L 322 79.4 Z M 290.3 79.2 L 278.3 79.2 A 4.876 4.876 0 0 1 278.065 79.193 Q 277.453 79.163 275.95 79 Q 274.1 78.8 271.9 78.3 A 21.697 21.697 0 0 0 269.189 80.415 Q 267.799 81.702 266.869 83.103 A 12.129 12.129 0 0 0 266.3 84.05 Q 264.6 87.2 264.6 90.1 Q 264.6 95.3 269.3 98.6 Q 272.803 101.06 278.473 101.686 A 37.647 37.647 0 0 0 282.6 101.9 A 31.728 31.728 0 0 0 287.691 101.512 Q 290.558 101.046 292.958 100.019 A 19.247 19.247 0 0 0 293.45 99.8 A 22.192 22.192 0 0 0 297.039 97.742 A 16.135 16.135 0 0 0 300.5 94.45 Q 303 91.2 303 87.8 A 10.586 10.586 0 0 0 302.717 85.267 A 6.365 6.365 0 0 0 299.75 81.15 A 11.466 11.466 0 0 0 297.033 80 Q 294.272 79.2 290.3 79.2 Z M 510.7 68.5 L 510.7 49.6 A 141.848 141.848 0 0 0 504.029 50.453 Q 497.411 51.469 492.851 52.951 A 41.828 41.828 0 0 0 492.55 53.05 Q 485.919 55.26 483.003 58.436 A 10.843 10.843 0 0 0 482.9 58.55 Q 480 61.8 480 66.3 A 16.625 16.625 0 0 0 480.273 69.427 Q 480.603 71.148 481.333 72.458 A 7.352 7.352 0 0 0 483.5 74.9 Q 487 77.4 491.8 77.4 A 20.16 20.16 0 0 0 500.296 75.488 A 23.635 23.635 0 0 0 501 75.15 A 38.513 38.513 0 0 0 504.996 72.819 Q 507.734 71.009 510.7 68.5 Z M 281.3 59.4 Q 285.2 59.4 288.45 57.45 A 14.625 14.625 0 0 0 293.445 52.431 A 17.239 17.239 0 0 0 293.7 52 A 15.224 15.224 0 0 0 295.604 45.921 A 18.889 18.889 0 0 0 295.7 44 A 19.048 19.048 0 0 0 295.279 39.901 A 14.52 14.52 0 0 0 293.75 35.85 A 14.062 14.062 0 0 0 290.275 31.717 A 13.375 13.375 0 0 0 288.55 30.55 A 14.263 14.263 0 0 0 281.859 28.709 A 16.965 16.965 0 0 0 281.3 28.7 Q 277.4 28.7 274.15 30.55 Q 270.9 32.4 268.95 35.8 A 14.306 14.306 0 0 0 267.334 40.265 A 19.868 19.868 0 0 0 267 44 A 17.271 17.271 0 0 0 267.598 48.623 A 14.654 14.654 0 0 0 269 52 A 15.139 15.139 0 0 0 272.521 56.231 A 14.262 14.262 0 0 0 274.25 57.45 Q 277.5 59.4 281.3 59.4 Z M 319.036 13.197 A 3.783 3.783 0 0 0 320.3 13.4 A 3.512 3.512 0 0 0 321.526 13.189 A 3.497 3.497 0 0 0 322.85 12.3 A 3.499 3.499 0 0 0 322.973 12.164 Q 323.9 11.085 323.9 9.3 A 4.913 4.913 0 0 0 323.855 8.624 A 3.534 3.534 0 0 0 322.85 6.55 Q 321.8 5.5 320.3 5.5 A 4.555 4.555 0 0 0 319.909 5.516 A 3.338 3.338 0 0 0 317.7 6.55 A 3.486 3.486 0 0 0 316.853 8.071 A 4.701 4.701 0 0 0 316.7 9.3 A 6.993 6.993 0 0 0 316.703 9.491 Q 316.751 11.256 317.7 12.3 A 3.24 3.24 0 0 0 319.036 13.197 Z" vector-effect="non-scaling-stroke"/></g></svg>
        </a>
        <p class="footer-001__copyright">@ 2023 Komugikotan. All rights reserved.</p>
        <p class="footer-001__copyright">Sound effects are provided by OtoLogic.</p>
    </footer>
</body>

<script>
    const searchParams = new URLSearchParams(window.location.search);

    let finished = false;
    let current_word = "";
    let current_number = 0;
    let current_word_number = 0;
    let number_missed = 0;
    let maximum_current_number = parseInt(searchParams.get('max'),10);
    let rndmnumbertmp;
    let didyououtputwithchart = false;

    function change_ptag(document_id,replace_text){
        var elm = document.getElementById(document_id);
        elm.textContent = replace_text;
    }
    function get_ptag(document_id){
        var elm = document.getElementById(document_id);
        return elm.innerText;
    }

    document.addEventListener('keypress', keypress_event);

    function keypress_event(e) {
        if(current_number < maximum_current_number){
            if(current_number != 0){
                

                if(current_word.slice(0,1) == e.key){
                    change_ptag("ty", get_ptag("ty") + e.key);
                    current_word = current_word.slice(1);

                    if(number_missed > 1){
                        change_ptag("en",pre_first[rndmnumbertmp]['en']);
                    }
                }
                else if(current_word.slice(0,1) == "é" && e.key == "e"){
                    change_ptag("ty", get_ptag("ty") + e.key);

                    current_word = current_word.slice(1);

                    

                    if(number_missed > 1){
                        change_ptag("en",pre_first[rndmnumbertmp]['en']);
                    }
                }
                else{
                    number_missed++;

                    audio.src='wrong.mp3';
                    audio.play();
                    if(number_missed > 2){
                        change_ptag("en",pre_first[rndmnumbertmp]['en']);


                        if(didyououtputwithchart == false){
                            // 親要素
                            var list = document.getElementById('list');

                            // 追加する要素を作成
                            var li = document.createElement('tr');
                            li.innerHTML = "<th>" + pre_first[rndmnumbertmp]['en'] + "</th><td>" + pre_first[rndmnumbertmp]['ja'] +"</td>";

                            // 末尾に追加
                            list.appendChild(li);
                            
                            didyououtputwithchart = true;
                        }
                    }
                }
            }
            

            if(current_word.length < 1){
                pre_first = pre_first.filter(n => n !== current_word_number);
                rndmnumbertmp = Math.floor(Math.random() * Object.keys(pre_first).length);
                current_word = pre_first[rndmnumbertmp]['en'];
                change_ptag("ja",pre_first[rndmnumbertmp]['ja']);
                change_ptag("en","");
                change_ptag("ty", "");

                didyououtputwithchart = false;
                
                number_missed = 0;

                current_number++;

                if(current_number >= maximum_current_number){
                    change_ptag("ja","FIN");
                    change_ptag("en","");
                }
            }
            else{
                
            }
            
        }
        else{
            change_ptag("ja","FIN");
            change_ptag("en","");
        }

        return false; 
    }

</script>
</html>